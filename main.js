const iconsSvg = {
  telegram: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7232 1.73126C14.6629 1.67918 14.5895 1.64455 14.511 1.63111C14.4324 1.61768 14.3517 1.62594 14.2775 1.65501L1.61128 6.61189C1.45721 6.67217 1.32687 6.78081 1.23981 6.92149C1.15276 7.06216 1.1137 7.22729 1.12849 7.39206C1.14328 7.55683 1.21114 7.71236 1.32186 7.83528C1.43258 7.9582 1.58019 8.04189 1.74253 8.07376L5.12503 8.73814V12.5C5.1251 12.6744 5.17728 12.8448 5.27488 12.9893C5.37248 13.1339 5.51105 13.2459 5.67279 13.3112C5.83454 13.3764 6.01209 13.3918 6.18264 13.3554C6.3532 13.319 6.509 13.2325 6.63003 13.1069L8.29503 11.38L10.8938 13.6581C11.0524 13.7985 11.2569 13.8761 11.4688 13.8763C11.5613 13.876 11.6532 13.8615 11.7413 13.8331C11.8856 13.7875 12.0155 13.7047 12.1179 13.5932C12.2204 13.4817 12.2918 13.3452 12.325 13.1975L14.8638 2.16064C14.8816 2.08305 14.878 2.00205 14.8532 1.92639C14.8284 1.85073 14.7834 1.78326 14.7232 1.73126ZM1.87815 7.33564C1.87576 7.32919 1.87576 7.32209 1.87815 7.31564C1.88097 7.31346 1.88414 7.31177 1.88753 7.31064L11.8694 3.40314L5.41315 8.02814L1.88753 7.33814L1.87815 7.33564ZM6.09003 12.5856C6.0728 12.6035 6.05064 12.6159 6.02638 12.6211C6.00211 12.6263 5.97683 12.6242 5.95377 12.615C5.93071 12.6058 5.9109 12.59 5.89688 12.5695C5.88286 12.549 5.87525 12.5248 5.87503 12.5V9.25689L7.73065 10.8819L6.09003 12.5856ZM11.5944 13.0281C11.5898 13.0493 11.5796 13.0688 11.5649 13.0846C11.5501 13.1004 11.5314 13.112 11.5107 13.1181C11.4895 13.1256 11.4667 13.1272 11.4447 13.1228C11.4227 13.1184 11.4023 13.1081 11.3857 13.0931L6.10253 8.45876L13.9375 2.84376L11.5944 13.0281Z" fill="currentColor"/></svg>`,
  github: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.8831 4.74501C13.0409 4.26203 13.095 3.7512 13.0419 3.24588C12.9888 2.74057 12.8297 2.25214 12.575 1.81251C12.5421 1.75547 12.4947 1.7081 12.4376 1.67519C12.3806 1.64227 12.3159 1.62497 12.25 1.62501C11.6764 1.62374 11.1108 1.75913 10.6 2.01998C10.0891 2.28083 9.64779 2.65963 9.3125 3.12501H7.6875C7.35221 2.65963 6.91087 2.28083 6.40004 2.01998C5.88921 1.75913 5.32358 1.62374 4.75 1.62501C4.68413 1.62497 4.61942 1.64227 4.56236 1.67519C4.50531 1.7081 4.45793 1.75547 4.425 1.81251C4.17027 2.25214 4.01115 2.74057 3.95806 3.24588C3.90496 3.7512 3.95908 4.26203 4.11688 4.74501C3.80047 5.27616 3.63073 5.88178 3.625 6.50001V7.00001C3.6261 7.8563 3.95228 8.68024 4.53761 9.30525C5.12294 9.93025 5.92374 10.3097 6.77812 10.3669C6.35861 10.8071 6.12472 11.3919 6.125 12V12.625H4.5C4.06902 12.625 3.6557 12.4538 3.35095 12.1491C3.0462 11.8443 2.875 11.431 2.875 11C2.875 10.3701 2.62478 9.76603 2.17938 9.32063C1.73398 8.87523 1.12989 8.62501 0.5 8.62501C0.400544 8.62501 0.305161 8.66452 0.234835 8.73484C0.164509 8.80517 0.125 8.90055 0.125 9.00001C0.125 9.09947 0.164509 9.19485 0.234835 9.26517C0.305161 9.3355 0.400544 9.37501 0.5 9.37501C0.930977 9.37501 1.3443 9.54621 1.64905 9.85096C1.9538 10.1557 2.125 10.569 2.125 11C2.125 11.6299 2.37522 12.234 2.82062 12.6794C3.26602 13.1248 3.87011 13.375 4.5 13.375H6.125V14.5C6.125 14.5995 6.16451 14.6948 6.23484 14.7652C6.30516 14.8355 6.40054 14.875 6.5 14.875C6.59946 14.875 6.69484 14.8355 6.76516 14.7652C6.83549 14.6948 6.875 14.5995 6.875 14.5V12C6.875 11.569 7.04621 11.1557 7.35095 10.851C7.6557 10.5462 8.06902 10.375 8.5 10.375C8.93098 10.375 9.3443 10.5462 9.64905 10.851C9.9538 11.1557 10.125 11.569 10.125 12V14.5C10.125 14.5995 10.1645 14.6948 10.2348 14.7652C10.3052 14.8355 10.4005 14.875 10.5 14.875C10.5995 14.875 10.6948 14.8355 10.7652 14.7652C10.8355 14.6948 10.875 14.5995 10.875 14.5V12C10.8753 11.3919 10.6414 10.8071 10.2219 10.3669C11.0763 10.3097 11.8771 9.93025 12.4624 9.30525C13.0477 8.68024 13.3739 7.8563 13.375 7.00001V6.50001C13.3693 5.88178 13.1995 5.27616 12.8831 4.74501ZM12.625 7.00001C12.625 7.6962 12.3484 8.36388 11.8562 8.85616C11.3639 9.34845 10.6962 9.62501 10 9.62501H7C6.30381 9.62501 5.63613 9.34845 5.14384 8.85616C4.65156 8.36388 4.375 7.6962 4.375 7.00001V6.50001C4.38155 5.97286 4.53996 5.45879 4.83125 5.01938C4.86952 4.96859 4.89425 4.9089 4.9031 4.84593C4.91196 4.78295 4.90465 4.71876 4.88188 4.65938C4.74037 4.29402 4.67529 3.90351 4.69066 3.512C4.70603 3.12048 4.80153 2.73628 4.97125 2.38313C5.41552 2.41665 5.84586 2.55329 6.22808 2.78222C6.61031 3.01114 6.93389 3.32603 7.17312 3.70188C7.20705 3.75499 7.25381 3.79869 7.30908 3.82895C7.36435 3.8592 7.42636 3.87505 7.48938 3.87501H9.51062C9.57358 3.87511 9.63555 3.85937 9.69082 3.82922C9.74609 3.79907 9.79288 3.7555 9.82687 3.70251C10.066 3.32647 10.3895 3.01141 10.7717 2.78237C11.154 2.55332 11.5844 2.41662 12.0288 2.38313C12.1985 2.73628 12.294 3.12048 12.3093 3.512C12.3247 3.90351 12.2596 4.29402 12.1181 4.65938C12.0954 4.71849 12.088 4.78238 12.0966 4.84511C12.1053 4.90785 12.1297 4.96737 12.1675 5.01813C12.4597 5.45763 12.6186 5.97227 12.625 6.50001V7.00001Z" fill="currentColor"/></svg>`,
}

if (document.readyState === 'loading')
  document.addEventListener('DOMContentLoaded', main)
else
  main()

function main() {
  createCssForIcons()
}

function createCssForIcons() {
  const newStyles = []

  Object
    .entries(iconsSvg)
    .forEach(([iconName, iconSvg]) => {
      newStyles.push(`.i-${iconName} { --icon: url("data:${createIconDataUri(iconSvg)}"); }`)
    })

  const style = document.createElement('style')
  style.innerHTML = newStyles.join('\n')
  document.getElementsByTagName('head')[0].appendChild(style)
}

/**
 * Encodes an SVG to an inline CSS image format.
 *
 * Credits to Anthony Fu for his research:
 * https://antfu.me/posts/icons-in-pure-css
 *
 * @param {string} svg SVG of the icon.
 */
function createIconDataUri(svg) {
  // https://bl.ocks.org/jennyknuth/222825e315d45a738ed9d6e04c7a88d0
  const svgEncoded = svg
    .replace('<svg', (~svg.indexOf('xmlns') ? '<svg' : '<svg xmlns="http://www.w3.org/2000/svg"'))
    .replace(/"/g, '\'')
    .replace(/%/g, '%25')
    .replace(/#/g, '%23')
    .replace(/\{/g, '%7B')
    .replace(/\}/g, '%7D')
    .replace(/</g, '%3C')
    .replace(/>/g, '%3E')

  return `image/svg+xml;utf8,${svgEncoded}`
}
